<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Office Hours Online</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--info for google api access-->
    <meta name="google-signin-client_id" 
        content="144888334346-q2reo5jb44s0ges19r5ikpggq5f014qh.apps.googleusercontent.com">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" 
        crossorigin="anonymous">
    <link rel="stylesheet" href="css/index.css">
    <script>
        function onSignIn(googleUser) {
            var profile = googleUser.getBasicProfile();
            var email = String(profile.getEmail());
            localStorage.setItem("email", email);
            var contElem = document.getElementById('continue');
            if(email.indexOf("ucsc.edu")== -1){
                alert("Please sign in with an @ucsc.edu email");
                contElem.style.visibility='hidden';
            }
            else{
                contElem.style.visibility='visible';
            }
        }
        function signOut() {
            var auth2 = gapi.auth2.getAuthInstance();
            auth2.signOut().then(function () {
                console.log('User signed out.');
            });
        }
    </script>
</head>

<body>
    <div id="page-wrap">
        <h1>OfficeHoursOnline</h1>
        <h3>(Oho)</h3>
        <!--google signin button-->
        <div class="g-signin2" data-onsuccess="onSignIn"></div>
        <a href="signin" id="continue" style="visibility:hidden">Continue</a>
        <a href="#" onclick="signOut();">Sign out</a>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" 
        crossorigin="anonymous"></script>
</body>

</html>